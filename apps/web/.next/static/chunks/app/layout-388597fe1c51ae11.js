(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4565:function(e,t,a){Promise.resolve().then(a.bind(a,6769)),Promise.resolve().then(a.bind(a,9968)),Promise.resolve().then(a.bind(a,256)),Promise.resolve().then(a.t.bind(a,9905,23)),Promise.resolve().then(a.t.bind(a,6763,23)),Promise.resolve().then(a.t.bind(a,190,23))},6769:function(e,t,a){"use strict";a.d(t,{default:function(){return o}});var s=a(8850);a(9189);var r=a(2511),l=a(8623),i=a(5955),n=a(9968);function o(){let{items:e,isOpen:t,closeCart:a,removeFromCart:o,cartTotal:c,clearCart:d,submitOrder:x}=(0,n.j)(),[m,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(!1),[b,f]=(0,i.useState)(""),[y,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!t){let e=setTimeout(()=>{u(!1),g(!1),f("")},300);return()=>clearTimeout(e)}},[t]);let j=async()=>{h(!0),f("");try{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}),{url:a,error:s}=await t.json();if(s)throw Error(s);if(!a)throw Error("Checkout URL missing");window.location.href=a}catch(e){f(e.message||"Checkout connection failed. Please try again.")}finally{h(!1)}};return(0,s.jsx)(r.M,{children:t&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] flex justify-end isolate",children:[(0,s.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,className:"absolute inset-0 bg-black/80 backdrop-blur-md"},"backdrop"),(0,s.jsxs)(l.E.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:28,stiffness:300,mass:.8},className:"relative z-10 w-full max-w-md bg-slate-950 h-full shadow-[0_0_50px_rgba(6,182,212,0.2)] flex flex-col border-l border-cyan-500/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-cyan-500/10 bg-slate-900/50 backdrop-blur-xl",children:[(0,s.jsxs)("h2",{className:"text-white text-2xl font-header font-black uppercase tracking-widest flex items-center gap-3 drop-shadow-[0_0_10px_rgba(6,182,212,0.5)]",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-cyan-400 animate-pulse-slow",children:"shopping_cart"}),"Cart"]}),(0,s.jsx)("button",{onClick:a,className:"size-10 flex items-center justify-center rounded-full bg-slate-800 hover:bg-cyan-500/20 text-slate-400 hover:text-cyan-400 transition-all active:scale-90","aria-label":"Close Cart",children:(0,s.jsx)("span",{className:"material-symbols-outlined text-2xl",children:"close"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 scrollbar-thin scrollbar-track-slate-900 scrollbar-thumb-cyan-900",children:0!==e.length||y?(0,s.jsx)(r.M,{mode:"popLayout",children:e.map(e=>(0,s.jsxs)(l.E.div,{layout:!0,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"group relative flex gap-4 bg-slate-900/80 border border-white/5 p-4 rounded-xl hover:border-cyan-500/30 transition-colors shadow-lg shadow-black/20",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/0 to-cyan-500/0 group-hover:from-cyan-500/5 group-hover:to-transparent rounded-xl transition-all duration-500"}),(0,s.jsx)("div",{className:"relative size-20 bg-black/40 rounded-lg flex items-center justify-center text-slate-600 border border-white/5 overflow-hidden",children:(0,s.jsx)("span",{className:"material-symbols-outlined text-3xl z-0",children:"ac_unit"})}),(0,s.jsxs)("div",{className:"flex-1 relative z-10",children:[(0,s.jsx)("h4",{className:"text-slate-200 font-bold leading-tight mb-1 line-clamp-2 md:line-clamp-1",children:e.name}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsxs)("span",{className:"text-cyan-400 font-header font-black text-lg tracking-wide shadow-cyan-glow",children:["$",e.price.toLocaleString()]}),(0,s.jsx)("span",{className:"text-[10px] text-slate-500 font-mono uppercase",children:"USD"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-black/40 rounded px-2 py-1 border border-white/5",children:[(0,s.jsx)("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"Qty"}),(0,s.jsx)("span",{className:"text-white font-mono text-xs",children:e.quantity})]}),(0,s.jsxs)("span",{className:"text-amber-500/90 font-bold uppercase text-[10px] tracking-wider flex items-center gap-1",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-[10px]",children:"warehouse"}),"Pickup"]})]})]}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:"absolute top-2 right-2 p-2 text-slate-600 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Remove ".concat(e.name),children:(0,s.jsx)("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]},e.id))}):(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 space-y-6",children:[(0,s.jsx)("div",{className:"size-24 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center shadow-inner",children:(0,s.jsx)("span",{className:"material-symbols-outlined text-6xl opacity-20 text-cyan-500",children:"production_quantity_limits"})}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"font-header font-bold uppercase tracking-[0.2em] text-lg text-slate-400",children:"System Empty"}),(0,s.jsx)("p",{className:"text-xs text-slate-600 font-mono",children:"No units detected in holding."})]}),(0,s.jsx)("button",{onClick:a,className:"px-6 py-3 bg-cyan-950/30 text-cyan-400 border border-cyan-500/30 rounded hover:bg-cyan-500 hover:text-black transition-all font-bold uppercase tracking-wider text-xs",children:"Initialize Inventory"})]})}),e.length>0&&(0,s.jsx)("div",{className:"p-6 border-t border-cyan-500/10 bg-slate-900/80 backdrop-blur-xl space-y-4 shadow-[0_-10px_40px_rgba(0,0,0,0.4)] z-20 pb-8 md:pb-6",children:(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-slate-400 text-xs font-bold uppercase tracking-widest",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-mono text-slate-500",children:[e.length," Units"]})]}),(0,s.jsxs)("div",{className:"flex items-end justify-between",children:[(0,s.jsxs)("span",{className:"text-white text-3xl font-header font-black tracking-tighter shadow-white-glow",children:["$",c.toLocaleString()]}),(0,s.jsx)("span",{className:"text-xs text-cyan-500 font-bold uppercase tracking-wider mb-1",children:"Calculated at Refresh"})]})]}),(0,s.jsx)("div",{className:"h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-cyan-500 w-[60%] shadow-[0_0_10px_#06b6d4]"})}),b&&(0,s.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-bold text-center",children:b}),(0,s.jsx)("button",{onClick:j,disabled:p,className:"w-full h-16 bg-gradient-to-r from-primary to-cyan-500 text-white font-header font-black uppercase tracking-[0.25em] text-sm rounded-xl shadow-[0_0_30px_rgba(0,174,239,0.3)] hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-4 group disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,s.jsx)("span",{className:"material-symbols-outlined animate-spin",children:"progress_activity"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Secure Checkout"}),(0,s.jsx)("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"lock"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-slate-600",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-sm",children:"lock"}),(0,s.jsx)("span",{className:"text-[10px] font-mono uppercase tracking-widest",children:"256-bit TLS Encryption via Stripe"})]})]})})]},"panel")]},"cart-portal")})}},9968:function(e,t,a){"use strict";a.d(t,{CartProvider:function(){return n},j:function(){return o}});var s=a(8850),r=a(5955),l=a(8953);let i=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("ahac_cart");if(e)try{n(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("ahac_cart",JSON.stringify(a))},[a]);let d=a.reduce((e,t)=>e+t.price*t.quantity,0),x=a.reduce((e,t)=>e+t.quantity,0),m=async e=>{try{let t={items:a.map(e=>({product_id:e.id,name:e.name,category:e.category,quantity:e.quantity})),customer_email:e,shipping_method:"PICKUP_AIEA"},s=l.env.NEXT_PUBLIC_API_URL||"/api/v1";console.log("\uD83D\uDED2 Submitting Order:",{apiUrl:s,orderPayload:t});let r=await fetch("".concat(s,"/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await r.json();if(!r.ok)throw Error(i.detail||"Order submission failed");return n([]),i}catch(e){throw console.error("Checkout Error:",e),e}};return(0,s.jsx)(i.Provider,{value:{items:a,isOpen:o,openCart:()=>c(!0),closeCart:()=>c(!1),addToCart:e=>{n(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}]),c(!0)},removeFromCart:e=>{n(t=>t.filter(t=>t.id!==e))},clearCart:()=>{n([])},cartTotal:d,cartCount:x,submitOrder:m},children:t})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},190:function(){}},function(e){e.O(0,[661,754,623,174,256,530,801,744],function(){return e(e.s=4565)}),_N_E=e.O()}]);