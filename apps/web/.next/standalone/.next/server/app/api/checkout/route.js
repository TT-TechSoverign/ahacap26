"use strict";(()=>{var e={};e.id=607,e.ids=[607],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},3837:e=>{e.exports=require("util")},5563:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>c});var a=r(5540),o=r(4707),i=r(7236),n=r(8601),u=r(4313);async function c(e){try{let{items:t}=await e.json();if(!t||0===t.length)return n.NextResponse.json({error:"No items in cart"},{status:400});let r=t.map(e=>({price_data:{currency:"usd",product_data:{name:e.name,images:e.image_url&&e.image_url.startsWith("http")?[e.image_url]:void 0,metadata:{model_number:e.name.match(/\(([^)]+)\)/)?.[1]||"N/A",btu:e.btu?.toString()||"N/A",category:e.category}},unit_amount:Math.round(100*e.price)},quantity:e.quantity})),s=await u.A.checkout.sessions.create({mode:"payment",line_items:r,success_url:`${e.headers.get("origin")}/shop?success=true&session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${e.headers.get("origin")}/shop?canceled=true`,shipping_address_collection:{allowed_countries:["US"]},custom_text:{shipping_address:{message:"FULFILLMENT NOTICE: Unit pricing reflects Local Pickup at our Waipahu Distribution Center (94-150 Leoleo St. #203). WARNING: Our facility is an active distribution hub; unscheduled arrivals cannot be accommodated. A coordinator will contact you within 24 business hours to schedule a specific window. Optional Island-Wide Delivery is available for a flat $50.00 fee to most residential zones (excluding North Shore, Waianae, Waikiki, and Waimanalo)."},submit:{message:"By confirming, you agree to the All Sales Final policy."}},metadata:{source:"web_checkout"},billing_address_collection:"required"});return n.NextResponse.json({sessionId:s.id,url:s.url})}catch(e){return console.error("Stripe Checkout Error:",e),n.NextResponse.json({error:e.message},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/checkout/route",pathname:"/api/checkout",filename:"route",bundlePath:"app/api/checkout/route"},resolvedPagePath:"C:\\Users\\Tai_Z790AeroG\\Desktop\\ahacws26\\apps\\web\\app\\api\\checkout\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h}=p,m="/api/checkout/route";function g(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},4313:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(1975);if(!process.env.STRIPE_SECRET_KEY)throw Error("STRIPE_SECRET_KEY is missing. Please restart your development server to load the new .env.local values.");let a=new s.Z(process.env.STRIPE_SECRET_KEY,{apiVersion:"2025-12-15.clover",typescript:!0})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4,771,975],()=>r(5563));module.exports=s})();