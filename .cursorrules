# AHACWS26 PROJECT CONSTITUTION: THE SOVEREIGN AGENT SUITE

## I. THE STRATEGIC ARCHITECT (Product & UX Vision)
1. **Conversion Logic**: Orchestrate a strict 4-step "Shop-to-Success" flow to minimize high-ticket HVAC abandonment.
2. **Ergonomic Priority**: Enforce "Thumb-Zone" standards; all primary interactive elements must reside in the bottom 30% of the viewport.
3. **Bento Modularity**: Organize all complex data (Order Summaries, Calendars, Specs) into high-contrast Bento Grid modules.
4. **Friction Reduction**: Eliminate exit-intent by stripping headers/footers during active "Ghost Checkout" states.
5. **Leaf-Node Tasking**: Decompose every user request into atomic "Leaf-Node" task artifacts before code generation.
6. **User Journey Audit**: Validate that the path from "Add to Cart" to "Scheduling" never exceeds 4 distinct user actions.
7. **Business Alignment**: Ensure every feature reflects the Affordable Home A/C brand value of "Professional, Industrial, Reliable".

## II. THE ADAPTIVE FRONTEND ENGINEER (Visual Identity)
1. **Token Reliance**: Strictly inherit colors, glows, and charcoal layers from `tailwind.config.js` and `globals.css`.
2. **Neon Aesthetic**: Maintain the "Industrial Neon" look using established glow utilities and high-contrast white typography.
3. **Framer Motion Mastery**: Implement "Express Cart" side-drawers using hardware-accelerated `AnimatePresence` with spring physics.
4. **Staggered Entry**: Use staggered opacity and motion entry for all list-based components (Cart Items, Inventory Badges).
5. **Interactive Feedback**: Apply haptic-style visual pulses or neon glows to all "Proceed" and "Confirm" button states.
6. **Mobile First**: Prioritize 100ms interaction response times and touch-target sizes for field-ready mobile use.
7. **Asset Optimization**: Enforce Next.js `next/image` for all product assets to ensure rapid loading on 5G/LTE.

## III. THE GHOST BACKEND & SECURITY AGENT (Financial Infrastructure)
1. **Payment Orchestration**: Implement Stripe Payment Element for Biometric (Apple/Google Pay) and Instant ACH.
2. **Zero-Knowledge Security**: Strictly block any hardcoded API keys; all secrets must pull from `process.env`.
3. **Webhook Integrity**: Ensure `/api/webhooks/stripe` triggers only upon verified `payment_intent.succeeded` signals.
4. **Transactional Safety**: Maintain idempotent processing for all orders to prevent double-billing or duplicate scheduling.
5. **Data Shielding**: Ensure customer PII is never logged or stored outside of the secure Stripe/Payment environment.
6. **Error Resilience**: Build graceful "Payment Failed" recovery flows that return users to the cart without data loss.
7. **API Health**: Conduct a pre-flight check of Stripe/Google API connectivity before initiating any checkout sequence.

## IV. THE LOGISTICS & SMTP AGENT (Communication Loop)
1. **SMTP Delivery**: Configure Nodemailer strictly for Bluehost SMTP (`mail.affordablehome-ac.com`) on Port 465.
2. **Internal Lead Flow**: Send high-priority HTML alerts to the shop crew for every new high-ticket transaction.
3. **Branded Receipts**: Generate "Industrial Neon" branded HTML receipts with dynamic PDF order summaries for the end-client.
4. **Scheduling Bridge**: Automate the post-purchase "Success" portal redirect to the live crew-availability calendar.
5. **Inventory Sync**: Trigger "In Stock" or "Arriving Soon" logic based on SKU-specific fulfillment data.
6. **Confirmation Latency**: Ensure all transactional emails are dispatched within 5 seconds of payment verification.
7. **Calendar Invite**: Attach an `.ics` calendar file to all confirmation emails to ensure customer installation attendance.

## V. THE DEVOPS & VPS COMMANDER (The Showrunner)
1. **Deployment Stability**: Maintain 100% uptime by managing multi-stage Docker builds and `standalone` output.
2. **Asset Path Audit**: Verify that all CSS/Static assets are correctly copied to the production image to prevent unstyled loading.
3. **Reverse Proxy Management**: Maintain the `.htaccess` tunnel between Bluehost Port 80/443 and the Docker Port 3000.
4. **System Pruning**: Automatically remove dangling Docker images and clean build-cache to preserve VPS disk space.
5. **SSL Enforcement**: Ensure all checkout routes are strictly served over HTTPS via Bluehost AutoSSL validation.
6. **CI/CD Verification**: Run a full production build-check locally before pushing any changes to the `main` branch.
7. **Resource Monitoring**: Track RAM/CPU usage during heavy traffic to ensure the Node.js runtime remains responsive.

## VI. SIDE-DRAWER SPECIALIST TEAM: ADAPTIVE EXPRESS CART
1. **Motion Architect**: Implement spring-physics transitions (stiffness: 300, damping: 30) matching project motion curves.
2. **UX State Manager**: Manage non-blocking global cart state; trigger `openDrawer()` immediately on "Add to Cart".
3. **Logistics Agent**: Embed "Scheduled Pickup" date picker (Waipahu) inside drawer footer.
4. **Thumb-Zone Designer**: Lock "Proceed to Checkout" to the bottom 30% viewport using project design tokens.
5. **Performance Auditor**: Force lazy-loading for drawer assets and verify standalone Docker export.

## VII. LAYOUT REARRANGEMENT PROTOCOL: DIRECT VISUAL MANIPULATION
1. **Grid-Snap Architect**: Define Bento-Grid snap points and enforce strict slot-based alignment.
2. **DnD Engineer**: Implement "Vibe-Reordering" drag logic with neon handles and haptic visual feedback.
3. **Animation Orchestrator**: Manage smooth "swap" animations using Framer Motion layout props.
4. **State Syncer**: Serialize card orders into `content.json` for instant VPS updates without rebuilds.
5. **Structural Auditor**: Protect mobile ergonomics and accessibility tab-orders after layout changes.
